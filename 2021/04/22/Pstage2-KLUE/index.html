<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Pstage2_KLUE - Jo Member</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Jo Member"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Jo Member"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="문장내 개체관 관계 추출뭔가 아쉬웠던 P-stage 2 KLUE가 끝이 났다. 이번 stage에서는 리더보드 순위를 올리는데에만 집중하기 보다는 다양한 task를 써보고 원리를 이해하고 결과를 토론계시판에 꼭 조금이라도 공유하는 방식으로 하기로 마음먹었었다."><meta property="og:type" content="blog"><meta property="og:title" content="Pstage2_KLUE"><meta property="og:url" content="https://jo-member.github.io/2021/04/22/Pstage2-KLUE/"><meta property="og:site_name" content="Jo Member"><meta property="og:description" content="문장내 개체관 관계 추출뭔가 아쉬웠던 P-stage 2 KLUE가 끝이 났다. 이번 stage에서는 리더보드 순위를 올리는데에만 집중하기 보다는 다양한 task를 써보고 원리를 이해하고 결과를 토론계시판에 꼭 조금이라도 공유하는 방식으로 하기로 마음먹었었다."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://jo-member.github.io/images/image-20210423130448198.png"><meta property="og:image" content="https://jo-member.github.io/2021/04/22/images/image-20210429181250424.png"><meta property="article:published_time" content="2021-04-22T06:29:38.000Z"><meta property="article:modified_time" content="2021-04-29T09:28:32.668Z"><meta property="article:author" content="jo-member"><meta property="article:tag" content="nlp"><meta property="article:tag" content="hugging_face"><meta property="article:tag" content="ner"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/image-20210423130448198.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://jo-member.github.io/2021/04/22/Pstage2-KLUE/"},"headline":"Pstage2_KLUE","image":["https://jo-member.github.io/images/image-20210423130448198.png","https://jo-member.github.io/2021/04/22/images/image-20210429181250424.png"],"datePublished":"2021-04-22T06:29:38.000Z","dateModified":"2021-04-29T09:28:32.668Z","author":{"@type":"Person","name":"jo-member"},"description":"문장내 개체관 관계 추출뭔가 아쉬웠던 P-stage 2 KLUE가 끝이 났다. 이번 stage에서는 리더보드 순위를 올리는데에만 집중하기 보다는 다양한 task를 써보고 원리를 이해하고 결과를 토론계시판에 꼭 조금이라도 공유하는 방식으로 하기로 마음먹었었다."}</script><link rel="canonical" href="https://jo-member.github.io/2021/04/22/Pstage2-KLUE/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Jo Member" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/jo-member"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-04-22T06:29:38.000Z" title="2021. 4. 22. 오후 3:29:38">2021-04-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-04-29T09:28:32.668Z" title="2021. 4. 29. 오후 6:28:32">2021-04-29</time></span><span class="level-item"><a class="link-muted" href="/categories/Boostcamp/">Boostcamp</a></span></div></div><h1 class="title is-3 is-size-4-mobile">Pstage2_KLUE</h1><div class="content"><h1 id="문장내-개체관-관계-추출"><a href="#문장내-개체관-관계-추출" class="headerlink" title="문장내 개체관 관계 추출"></a>문장내 개체관 관계 추출</h1><p>뭔가 아쉬웠던 P-stage 2 KLUE가 끝이 났다.</p>
<p>이번 stage에서는 리더보드 순위를 올리는데에만 집중하기 보다는 다양한 task를 써보고 원리를 이해하고 결과를 토론계시판에 꼭 조금이라도 공유하는 방식으로 하기로 마음먹었었다.</p>
<span id="more"></span>



<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul>
<li><p><strong>문제정의</strong> : 문장의 단어(Entity)에 대한 속성과 관계를 예측하라. </p>
</li>
<li><p>Input data : 9000개의 train data, 1000개의 test data</p>
<p><img src="/images/image-20210423130448198.png"></p>
<p>우리가 빼내야 할 column : sentence, entities, place of entities</p>
</li>
<li><p><strong>Output</strong></p>
<p>총 42개의 class를 예측 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;관계_없음&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;인물:배우자&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;인물:직업/직함&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;단체:모회사&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;인물:소속단체&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;인물:동료&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;단체:별칭&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;인물:출신성분/국적&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;인물:부모님&#x27;</span>: <span class="number">8</span>, <span class="string">&#x27;단체:본사_국가&#x27;</span>: <span class="number">9</span>, <span class="string">&#x27;단체:구성원&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;인물:기타_친족&#x27;</span>: <span class="number">11</span>, <span class="string">&#x27;단체:창립자&#x27;</span>: <span class="number">12</span>, <span class="string">&#x27;단체:주주&#x27;</span>: <span class="number">13</span>, <span class="string">&#x27;인물:사망_일시&#x27;</span>: <span class="number">14</span>, <span class="string">&#x27;단체:상위_단체&#x27;</span>: <span class="number">15</span>, <span class="string">&#x27;단체:본사_주(도)&#x27;</span>: <span class="number">16</span>, <span class="string">&#x27;단체:제작&#x27;</span>: <span class="number">17</span>, <span class="string">&#x27;인물:사망_원인&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;인물:출생_도시&#x27;</span>: <span class="number">19</span>, <span class="string">&#x27;단체:본사_도시&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;인물:자녀&#x27;</span>: <span class="number">21</span>, <span class="string">&#x27;인물:제작&#x27;</span>: <span class="number">22</span>, <span class="string">&#x27;단체:하위_단체&#x27;</span>: <span class="number">23</span>, <span class="string">&#x27;인물:별칭&#x27;</span>: <span class="number">24</span>, <span class="string">&#x27;인물:형제/자매/남매&#x27;</span>: <span class="number">25</span>, <span class="string">&#x27;인물:출생_국가&#x27;</span>: <span class="number">26</span>, <span class="string">&#x27;인물:출생_일시&#x27;</span>: <span class="number">27</span>, <span class="string">&#x27;단체:구성원_수&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;단체:자회사&#x27;</span>: <span class="number">29</span>, <span class="string">&#x27;인물:거주_주(도)&#x27;</span>: <span class="number">30</span>, <span class="string">&#x27;단체:해산일&#x27;</span>: <span class="number">31</span>, <span class="string">&#x27;인물:거주_도시&#x27;</span>: <span class="number">32</span>, <span class="string">&#x27;단체:창립일&#x27;</span>: <span class="number">33</span>, <span class="string">&#x27;인물:종교&#x27;</span>: <span class="number">34</span>, <span class="string">&#x27;인물:거주_국가&#x27;</span>: <span class="number">35</span>, <span class="string">&#x27;인물:용의자&#x27;</span>: <span class="number">36</span>, <span class="string">&#x27;인물:사망_도시&#x27;</span>: <span class="number">37</span>, <span class="string">&#x27;단체:정치/종교성향&#x27;</span>: <span class="number">38</span>, <span class="string">&#x27;인물:학교&#x27;</span>: <span class="number">39</span>, <span class="string">&#x27;인물:사망_국가&#x27;</span>: <span class="number">40</span>, <span class="string">&#x27;인물:나이&#x27;</span>: <span class="number">41</span>&#125; </span><br></pre></td></tr></table></figure></li>
</ul>
<br/>

<h2 id="EDA"><a href="#EDA" class="headerlink" title="EDA"></a>EDA</h2><p>이번 자연어 task의 경우에는 데이터도 적고 image task에 비해 복잡한 eda가 필요한것 같지는 않았다.</p>
<p>따라서 가장 중요한 label들의 갯수만을 확인하고 빠르게 다음 단계로 넘어갔다. (토론글에도 하나 작성하긴 했지만, 거기서 작성했던 label들간의 유사성으로 class imbalnace를 해결하기 보다는 focal loss를 사용하는게 직관적으로 더 쉬워 보여서 focal loss를 사용하기로 하였다.</p>
<ol>
<li>label들의 분포</li>
</ol>
<p>주피터 노트북을 통해 빠르게 data를 불러와서 label들의 분포를 확인하여 보니. label들간의 불균형이 매우 매우 심했다. 심지어 인물 : 사망국가의 label을 가지는 data는 1개 뿐 이였다. 이 1개로 과연 test data의 해당 label을 잘 맞출수 있을까? 아닐것 같다.</p>
<p>이러한 imbalnace문제에 효과적으로 대처하는 방법은 이전 p-stage에서도 배웠었다.  바아아아로 focal loss</p>
<p>focal loss에 대해서 간략하게 알아보자</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FocalLoss</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, weight=<span class="literal">None</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                 gamma=<span class="number">2.</span>, reduction=<span class="string">&#x27;mean&#x27;</span></span>):</span></span><br><span class="line">        nn.Module.__init__(self)</span><br><span class="line">        self.weight = weight</span><br><span class="line">        self.gamma = gamma</span><br><span class="line">        self.reduction = reduction</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, input_tensor, target_tensor</span>):</span></span><br><span class="line">        log_prob = F.log_softmax(input_tensor, dim=-<span class="number">1</span>)</span><br><span class="line">        prob = torch.exp(log_prob)</span><br><span class="line">        <span class="keyword">return</span> F.nll_loss(</span><br><span class="line">            ((<span class="number">1</span> - prob) ** self.gamma) * log_prob,</span><br><span class="line">            target_tensor,</span><br><span class="line">            weight=self.weight,</span><br><span class="line">            reduction=self.reduction</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<p>Focal loss는 페이스북의 Lin et al이 제안한 loss function이다</p>
<p>간단하게 말하면 분류 에러에 근거하여 맞춘 확률이 높은 Class는 조금의 loss를, 맞춘 확률이 낮은 Class는 Loss를 훨씬 높게 부여해주는 가중치를 주어서 class imbalance에 더욱 효율적으로 대처하는 loss funtion이라고 생각하면 된다.</p>
<p>loss 함수를 호출하게 되면 input tensor들에 대한 확률로 표현된 tensor를 얻은뒤 F.nll_loss를 호출한다.</p>
<p><code>F.nll_loss(((1-prob) ** self.gamma) * log_prob,target_tensor,weight=self.weight,reduction=self.reduction)</code></p>
<p>Weight 값을 우리가 가지고 있는 label 분포에 대한 1-d tensor로 넣어준다.</p>
<p>Ex) 우리가 가지고 있는 label들은 42개니까 42 length를 가지는 1-d tensor 값은 label의 분포에 맞게</p>
<p>이렇게 loss 함수를 불러다가 짜주면 끄읏</p>
<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><p>모델을 굉장히 여러개 불러다가처음엔 돌려보았다. 사용해본 model 목록</p>
<ol>
<li>bert-base-multilingual-cased</li>
<li>xlm-roberta-large</li>
<li>koelectra-base-v3-discriminator</li>
<li>kobert</li>
</ol>
<p>이렇게 4개정도 실험해 보았던것 같았다. 결국 결론만 말해보자면 RoBERTa-large를 사용했다.<br>hevitz 님의 토론계시판 글을 보니, bert도 large를 사용하면 좋겠지만?????? 아직 Huggingface에  model이 공개된것 같지 않다.</p>
<p>그리고 </p>
<blockquote>
<p>This paper shows that pretraining multilingual language models at scale leads to significant performance gains for a wide range of cross-lingual transfer tasks.</p>
</blockquote>
<p>라는 RoBERTa의 논문을 보면 이 significant performance gains 라는 문구는 이게 맞다라는 확신을 가져다 주었다. (물론 논문에서는 다들 자기가 짱이라고하긴하지)</p>
<p>또한 4개를 각각 적당한 hyperparameter로 돌려본 결과 평균적인 정확도가 roberta-large를 사용하면 대폭 증가함을 확인하였다.<br>RoBERTa는 bert와 유사하지만 BERT에 다양한 방법을 적용시켜 성능을 향상한 model이다. Model의 구조는 bert와 흡사하니 생략하겠다.</p>
<p>단지 hyperparameter를 최적화하고 NSP를 없애고 최대한 max_length에 맞춰서 문장을 넣어주고, masking을 더 다양한 방법으로 해주었다고 한다.</p>
<h2 id="train-방법"><a href="#train-방법" class="headerlink" title="train 방법?"></a>train 방법?</h2><ol>
<li>loss</li>
<li>optimizer</li>
<li>Train-set, validation-set 나누기</li>
</ol>
<p>이번 KLUE에서 Huggingface의 라이브러리는 질리도록 다룬것 같다. 물론 아직 모자르지만 ㅎㅎ<br>이전 P-stage에서는 training 과정을 우리가 다 pytorch 라이브러리를 사용하여 train 함수를 만들고 쏼라쏼라 해서 구현했었는데!!!!</p>
<p>이런 편리한 trainer라는게 있는 hugging face 아주 칭찬해 ^^</p>
<p>하지만 단순히 trainer를 사용하는것은 실력 증진에 별로 의미가 없다고 생각했다. (물론 마스터님 말씀처럼 Hugging face만 잘 사용하더라도 그만큼 장점이 있다고 한다!!!)</p>
<p>그래서 huggingface 홈페이지에 들어가서 trainer를 자세히 살펴보았다.</p>
<p>처음에 정했던 focal loss를 사용하기 위해서는 trainer class를 상속받아서 나만의 trainer class를 구현해주어야 했다. 홈페이지를 보면 관련 예제가 있어 쉽게 바꿔줄수 있었다. (현규님의 도움과 함께라면 ㅎㅎ)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FocalLossTrainer</span>(<span class="params">Trainer</span>) :</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compute_loss</span>(<span class="params">self, model, inputs, return_outputs=<span class="literal">False</span></span>) :</span></span><br><span class="line">        labels = inputs.pop(<span class="string">&#x27;labels&#x27;</span>)</span><br><span class="line">        outputs = model(**inputs)</span><br><span class="line">        logits = outputs.logits</span><br><span class="line">        loss_fn = FocalLoss(weight=weight)</span><br><span class="line">        loss = loss_fn(logits, labels)</span><br><span class="line">        <span class="keyword">return</span> (loss, outputs) <span class="keyword">if</span> return_outputs <span class="keyword">else</span> los</span><br></pre></td></tr></table></figure>

<p>여기서 <code>loss_fn</code>만 위에서 정의한 FocalLoss()를 불러다가 사용하면 끄읏! easy</p>
<p>Optimizer관련해서는 trainer 안에서 사용하는 AdamW를 그대로 사용하면 될거 같았고 수정해주어야 할 것은</p>
<ul>
<li>lr_scheduler</li>
<li>lr</li>
</ul>
<p>이정도? 인것 같다. default 로 설정된 lr_scheduler은 step에 따라 linear 하게 lr 이 감소하는 scheduler를 쓴거 같은데<br>저번에 사용했던 <strong>CosineAnnealingWarmRestarts</strong> 으로 바꾸어서 사용해보면 어떨까? 생각을 해보았다.</p>
<p>저번 stage에서 AdamP와 CosineAnnealingWarmRestarts의 조합으로 꽤나 쏠쏠한 재미를 보았기 때문에 ㅎㅎ</p>
<p>세세한 parameter은 seed를 고정시킨 이후 validation score를 기준으로 설정해주면 될듯 싶다.<br>validation 과 train은 2:8 로 나누었고 제출전에는 data모두를 사용해서 train 한 model로 inference 하였다.</p>
<p><strong>자 이제 가장크게 고민을 해준 부분이다</strong></p>
<h2 id="Input-형식에-따른-성능"><a href="#Input-형식에-따른-성능" class="headerlink" title="Input 형식에 따른 성능"></a>Input 형식에 따른 성능</h2><p>이번 stage에서 제공된 baseline code는 꽤나 simple하고 간결하지만 있을거는 다있다.</p>
<p>가장 의문점이 들었던 것은 tokenizer에 넣어주는 data 의 형식이였다.</p>
<p>ent01 : 이순신</p>
<p>ent02 : 무신</p>
<p>sentence : 이순신은 조선중기의 무신이다.</p>
<p># RoBERTa tokenizer 기준 special token</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#39;bos_token&#39;: &#39;&lt;s&gt;&#39;,</span><br><span class="line"> &#39;eos_token&#39;: &#39;&lt;&#x2F;s&gt;&#39;,</span><br><span class="line"> &#39;unk_token&#39;: &#39;&lt;unk&gt;&#39;,</span><br><span class="line"> &#39;sep_token&#39;: &#39;&lt;&#x2F;s&gt;&#39;,</span><br><span class="line"> &#39;pad_token&#39;: &#39;&lt;pad&gt;&#39;,</span><br><span class="line"> &#39;cls_token&#39;: &#39;&lt;s&gt;&#39;,</span><br><span class="line"> &#39;mask_token&#39;: &#39;&lt;mask&gt;&#39;&#125;</span><br><span class="line"> </span><br><span class="line"> &lt;s&gt; 이순신 &lt;&#x2F;s&gt; 무신 &lt;&#x2F;s&gt;&lt;s&gt; 문장 &lt;&#x2F;s&gt;</span><br></pre></td></tr></table></figure>

<p> 이러한 형식으로 들어갔다.<br>오피스아워에서 여쭈어 보니까, 별다른 이유 없이 간단하게 정해준 형식이라고 했다.</p>
<p>따라서 초코송이님께서 올려주신 ner을 entitiy사이에 넣어주는 논문글을 읽고 pororo library를 이용하여 ner을 얻어낸뒤 이를 entity양옆에 삽입하여 주었다. </p>
<p><img src="../images/image-20210429181250424.png" alt="image-20210429181250424"></p>
<p>이와같은 형식이다.</p>
<p>처음에는 저 기호들을 special token에 추가해준뒤, model에 넣어주었지만!!</p>
<p>혜린님의 질문과 피드백으로 논문에서는 special 토큰으로 지정하지 않고, 원래 vocab에 있는 기호들을 사용하였다고 한다……<br>이미 토론글에 올렸는데……… 올리기 잘했다는 생각이 들었다. 올리지 않았다면 이 문제를 평생 모르고 잘못된 지식을 가진채로 실험하였을것이다.</p>
<p>마스터이나 조교님들 말씀대로 일단 나대는게 좋은것 같다. 남들에게 배울점도 많고, 나대면서 스스로 좀더 찾아보고 학습하게 되는것 같다.</p>
<p>이러한 input 형식은 동일 seed model hyperparamter으로 약 1.5퍼 정도 leaderboard acc의 상승을 이끌어냈다.</p>
<p>autotokenizer로 불러온 tokenizer은 대부분의 vocab들을 포함하고 있어, unknown으로 나오는 token들이 적은것을 확인하였다.<br>특히 entity가 unk로 나오게되면 큰 문제임으로 이를 체크하였는데, 모두 잘 tokenize된것을 확인하였다.</p>
<p>optimzer은 trainer에서 사용했던걸로 동일하게 사용하였고<br>lr과 scheduler를 바꾸어 가며 RoBERTa에 맞는 hyperparameter를 찾기위해 노렸했다.;)</p>
<p>이번 stage에는 따로 하고있는 ROS 실습과 겹쳐 하고싶은게 3가지 있었는데 못해봤다ㅠㅠ</p>
<ol>
<li><p>wandb로 실험 관리하기, sweep 사용해서 automl까지 해보기</p>
</li>
<li><p>input에 무작위로 masking 적용해보기</p>
</li>
<li><p>augmentation으로 data 증강해보기</p>
</li>
</ol>
<p>하지만 이번 stage로 관심이 없었던 NLP에 대해 다시한번 생각해보게 되었다. 생각보다 재미있는 아이디어들이 많았고, 특히 오피스아워나 마스터 클래스에서 멘토님과 마스터님의 열정을 보고 굉장히 큰 영감과 자극을 받았다. 아직 한국어 관련 NLP task들이 많이 부족하다는 걸 듣고 확실히 고려해보게 되었다. Hugging face 를 많이 다루어 본점도 매우 득이되었던 stage였다.</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Pstage2_KLUE</p><p><a href="https://jo-member.github.io/2021/04/22/Pstage2-KLUE/">https://jo-member.github.io/2021/04/22/Pstage2-KLUE/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>jo-member</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-04-22</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-04-29</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/nlp/">nlp</a><a class="link-muted mr-2" rel="tag" href="/tags/hugging-face/">hugging_face</a><a class="link-muted mr-2" rel="tag" href="/tags/ner/">ner</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/04/25/Pstage3-Image-Segmentation-Detection/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Pstage3_Image_Segmentation_Detection</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/03/08/2021-03-08-Boostcamp31.1/"><span class="level-item">Image Classification</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://jo-member.github.io/2021/04/22/Pstage2-KLUE/';
            this.page.identifier = '2021/04/22/Pstage2-KLUE/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'jo-member' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#문장내-개체관-관계-추출"><span class="level-left"><span class="level-item">1</span><span class="level-item">문장내 개체관 관계 추출</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Overview"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">Overview</span></span></a></li><li><a class="level is-mobile" href="#EDA"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">EDA</span></span></a></li><li><a class="level is-mobile" href="#Model"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">Model</span></span></a></li><li><a class="level is-mobile" href="#train-방법"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">train 방법?</span></span></a></li><li><a class="level is-mobile" href="#Input-형식에-따른-성능"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">Input 형식에 따른 성능</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithm/"><span class="level-start"><span class="level-item">Algorithm</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Boostcamp/"><span class="level-start"><span class="level-item">Boostcamp</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/Competition/"><span class="level-start"><span class="level-item">Competition</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Mathmatics-for-ML/"><span class="level-start"><span class="level-item">Mathmatics_for_ML</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Paper-Review/"><span class="level-start"><span class="level-item">Paper Review</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/PaperReview/"><span class="level-start"><span class="level-item">PaperReview</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/blog/"><span class="level-start"><span class="level-item">blog</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-12T05:42:40.000Z">2021-07-12</time></p><p class="title"><a href="/2021/07/12/vqa_paper1/">VQA: Visual Question Answering vs Competition Baseline</a></p><p class="categories"><a href="/categories/Paper-Review/">Paper Review</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-12T03:09:10.000Z">2021-07-12</time></p><p class="title"><a href="/2021/07/12/VQA/">VQA (Visual Question Answering)</a></p><p class="categories"><a href="/categories/Competition/">Competition</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-04-25T11:52:06.000Z">2021-04-25</time></p><p class="title"><a href="/2021/04/25/Pstage3-Image-Segmentation-Detection/">Pstage3_Image_Segmentation_Detection</a></p><p class="categories"><a href="/categories/Boostcamp/">Boostcamp</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-04-22T06:29:38.000Z">2021-04-22</time></p><p class="title"><a href="/2021/04/22/Pstage2-KLUE/">Pstage2_KLUE</a></p><p class="categories"><a href="/categories/Boostcamp/">Boostcamp</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-07T15:00:00.000Z">2021-03-08</time></p><p class="title"><a href="/2021/03/08/2021-03-08-Boostcamp31.1/">Image Classification</a></p><p class="categories"><a href="/categories/Boostcamp/">Boostcamp</a></p></div></article></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Jo Member" height="28"></a><p class="is-size-7"><span>&copy; 2021 jo-member</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>